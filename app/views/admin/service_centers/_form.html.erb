<%= javascript_include_tag "jquery.timepicker.js" %>
<%= javascript_include_tag "jquery.validate.min.js" %>
<%= javascript_include_tag "mask.js" %>

<script type="text/javascript">
  $(document).ready(function (){
    $('#admin_service_center_Tel').mask('(000) 000-0000');
      $('.time').timepicker({
        'showDuration': true,
        'timeFormat': 'g:ia'
    });
/*    $(".satday").click(function () { //alert("working");
      if($(this).val()==1){ //alert($(this).val());
        $(".sat_working").hide();
      }else{ //alert($(this).val());
        $(".sat_working").show();
      }
    });*/
    $("#submit").click(function() {
      if($("#admin_service_center_WorkingHours").val()=="" || $("#admin_service_center_WorkingHours").val()==null){
        alert("Please click on add timmings to add center timings");
        return false;
      }
    });
/*      $(".sunday").click(function () { //alert("working");
        if($(this).val()==1){ //alert($(this).val());
          $(".sunday_working").hide();
        }else{ //alert($(this).val());
          $(".sunday_working").show();
        }
      });*/
  $(".new_admin_service_center").validate({
    errorElement: "label",
  rules: {
     "admin_service_center[State]": {required:true},
     "admin_service_center[City]": {required:true},
     "admin_service_center[Name]": {required:true},
     "admin_service_center[State]": {required:true},
     "admin_service_center[StreetAddress]": {required:true},
     "admin_service_center[Tel]": {required:true},
     "admin_service_center[Fax]": {required:true,number:true},
     "admin_service_center[Pin]": {required:true,number:true},
     "admin_service_center[Email]": {required:true,email:true},
     "admin_service_center[Url]": {required:true,url:true},
     "admin_service_center[ContactPerson]": {required:true},
     "admin_service_center[lat]": {required:true,number:true},
     "admin_service_center[lan]": {required:true,number:true},
     "mon_hours_start": {required:true},
     "mon_hours_close": {required:true},
     "tue_hours_start": {required:true},
     "tue_hours_close": {required:true},
     "wed_hours_start": {required:true},
     "wed_hours_close": {required:true},
     "thu_hours_start": {required:true},
     "thu_hours_close": {required:true},
     "fri_hours_start": {required:true},
     "fri_hours_close": {required:true},
     "WorkingHours":{required:true}

    }});

      $(".edit_admin_service_center").validate({
    errorElement: "label",
  rules: {
     "admin_service_center[State]": {required:true},
     "admin_service_center[City]": {required:true},
     "admin_service_center[Name]": {required:true},
     "admin_service_center[StreetAddress2]": {required:true},
     "admin_service_center[StreetAddress]": {required:true},
     "admin_service_center[Tel]": {required:true},
     "admin_service_center[Fax]": {required:true,number:true},
     "admin_service_center[Pin]": {required:true,number:true},
     "admin_service_center[Email]": {required:true,email:true},
     "admin_service_center[Url]": {required:true,url:true},
     "admin_service_center[ContactPerson]": {required:true},
    // "admin_service_center[lat]": {required:true,number:true},
    // "admin_service_center[lan]": {required:true,number:true},
     "mon_hours_start": {required:true},
     "mon_hours_close": {required:true},
     "tue_hours_start": {required:true},
     "tue_hours_close": {required:true},
     "wed_hours_start": {required:true},
     "wed_hours_close": {required:true},
     "thu_hours_start": {required:true},
     "thu_hours_close": {required:true},
     "fri_hours_start": {required:true},
     "fri_hours_close": {required:true},
     "WorkingHours":{required:true}

    }});

  });

</script>
<%# if action_name=="new" %>
<script>
function addTimings(){
    codeAddress()
    //alert($("#mon_start").val());
    if($("#mon_start").val() !='' && $("#mon_close").val() !='' && $("#tue_start").val() !='' && $("#tue_close").val() !='' && $("#wed_start").val() !='' && $("#wed_close").val() !='' && $("#thu_start").val() !='' && $("#thu_close").val() !='' && $("#fri_start").val() !='' && $("#fri_close").val() !=''){
          //alert("ok working");
          /*if($('input[name=sat_holiday]:checked').val()==0 && $("#sat_start").val() !='' && $("#sat_close").val() !='') {*/
            var timings = new Array ();
            timings.push({"mon_start":$("#mon_start").val()});
            timings.push({"mon_close":$("#mon_close").val()});
            timings.push({"tue_start":$("#tue_start").val()});
            timings.push({"tue_close":$("#tue_close").val()});
            timings.push({"wed_start":$("#wed_start").val()});
            timings.push({"wed_close":$("#wed_close").val()});
            timings.push({"thu_start":$("#thu_start").val()});
            timings.push({"thu_close":$("#thu_close").val()});
            timings.push({"fri_start":$("#fri_start").val()});
            timings.push({"fri_close":$("#fri_close").val()});
            timings.push({"sat_start":$("#sat_start").val()});
            timings.push({"sat_close":$("#sat_close").val()});
          //console.log(timings);
           $("#admin_service_center_WorkingHours").val(JSON.stringify(timings));
        /*}else if ($('input[name=sat_holiday]:checked').val()==1){
            var timings = new Array ();
            timings.push({"mon_start":$("#mon_start").val()});
            timings.push({"mon_close":$("#mon_close").val()});
            timings.push({"tue_start":$("#tue_start").val()});
            timings.push({"tue_close":$("#tue_close").val()});
            timings.push({"wed_start":$("#wed_start").val()});
            timings.push({"wed_close":$("#wed_close").val()});
            timings.push({"thu_start":$("#thu_start").val()});
            timings.push({"thu_close":$("#thu_close").val()});
            timings.push({"fri_start":$("#fri_start").val()});
            timings.push({"fri_close":$("#fri_close").val()});
            timings.push({"sat_start":"off"});
            timings.push({"sat_close":"off"});
          //console.log(timings);
           $("#timings_hidden").val(JSON.stringify(timings));
        }else {
            alert("Please select the service center timings");    
        }*/
    } else {
      alert("Please select the service center timings");
    }
  }
</script>
<%# end %>
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"></script>
        <script type="text/javascript">
        function initialize() {
        var address = (document.getElementById('admin_service_center_StreetAddress'));
        var autocomplete = new google.maps.places.Autocomplete(address);
        autocomplete.setTypes(['geocode']);
        google.maps.event.addListener(autocomplete, 'place_changed', function() {
            var place = autocomplete.getPlace();
            if (!place.geometry) {
                return;
            }

        var address = '';
        if (place.address_components) {
            address = [
                (place.address_components[0] && place.address_components[0].short_name || ''),
                (place.address_components[1] && place.address_components[1].short_name || ''),
                (place.address_components[2] && place.address_components[2].short_name || '')
                ].join(' ');
        }
      });
}
function codeAddress() {
    geocoder = new google.maps.Geocoder();
    var address = document.getElementById("admin_service_center_StreetAddress").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        $('#admin_service_center_lat').val(results[0].geometry.location.lat());
        $('#admin_service_center_lan').val(results[0].geometry.location.lng());
      //alert("Latitude: "+results[0].geometry.location.lat());
      //alert("Longitude: "+results[0].geometry.location.lng());
      } 

      else {
        //alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
google.maps.event.addDomListener(window, 'load', initialize);

        </script>

    <div class="container">
    <div class="serch-fld">
          <label class="margin-top">Add/Update Service Center </label>
           <span class="align-right">
              <!-- <input class="form-control" type="search">
                <input value="" class="search-submit" type="submit" /> -->
            </span>
           
        </div>  
    <ol class="breadcrumb">
      <li class="active">>> <a href="/admin">Dashboard</a> >></li><li> <a href="/admin/service_centers"> Service Centers </a> >> </li><li> Add/Update</li>
    </ol> 
<div class="srvc-cntr-fld">	
<div class="srvc-frm">		
<%= form_for(@admin_service_center) do |f| %>
  <% if @admin_service_center.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@admin_service_center.errors.count, "error") %> prohibited this admin_service_center from being saved:</h2>

      <ul>
      <% @admin_service_center.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :Name %><br>
    <%= f.text_field :Name, :placeholder => "Enter Name" %>
  </div>
  <div class="field">
    <%= f.label :State %><br>
    <%= f.text_field :State, :placeholder => "Enter State" %>
  </div>
  <div class="field">
    <label>Address</label>
    <%#= f.label :StreetAddress %><br>
    <%= f.text_field :StreetAddress, :placeholder => "Enter Address"  %>
  </div>
    <div class="field">
    <label>Address 2</label>
    <%#= f.label :StreetAddress2 %><br>
    <%= f.text_field :StreetAddress2 , :placeholder => "Enter Address 2" %>
  </div> 
  <div class="field">
    <%= f.label :City %><br>
    <%= f.text_field :City , :placeholder => "Enter City Name" %>
  </div>
  <div class="field">
    <label>Zip</label><br>
    <%= f.text_field :Pin , :placeholder => "Enter ZipCode" %>
  </div>
  <div class="field">
    <%= f.label :Tel %><br>
    <%= f.text_field :Tel , :placeholder => "Enter Contact " %>
    <input type="hidden" id="admin_service_center_Tel_hidden">
  </div>
  <div class="field">
    <%= f.label :Fax %><br>
    <%= f.text_field :Fax , :placeholder => "Enter Fax" %>
  </div>
  <div class="field">
    <%= f.label :Email %><br>
    <%= f.text_field :Email , :placeholder => "Enter Email" %>
  </div>
  <div class="field">
    <%= f.label :Url %><br>
    <%= f.text_field :Url , :placeholder => "Enter Service Center Url" %>
  </div>
  <div class="field">
    <label>Contact Person</label>
    <%#= f.label :ContactPerson %><br>
    <%= f.text_field :ContactPerson , :placeholder => "Enter Contact Person Name" %>
  </div>
  <div class="field">
    <label>Trailer Accessible</label><br>
    <input type="radio" name="admin_service_center[trailer_access]" value="1">Yes
  </div>
    <div class="field">
    <label>Appointment Needed for Service</label><br>
    <input type="radio" name="admin_service_center[appointment_service]" value="1">Yes
  </div>
  <div class="field">
    <label>Appointment Needed for Installation</label><br>
    <input type="radio" name="admin_service_center[appointment_installation]" value="1">Yes
  </div>

    <%= f.hidden_field :lat %>
    <%= f.hidden_field :lan %>

  <div class="cntr-frm-fl">
  	<p class="wrkng-hr-dtl">Working Hours Details :  </p>
    <div class="field">
    <label>Working Hours Mon</label><br>
    <div class="input-sb-fld">
    <input type="text" id="mon_start" class="time" name="mon_hours_start" placeholder="start time">
    </div>
    <div class="input-sb-fld">
    <input type="text" id="mon_close" class="time" name="mon_hours_close" placeholder="close time">
    </div>
  </div>
  <div class="field">
    <label>Working Hours Tue</label><br>
    <div class="input-sb-fld">
    <input type="text" id="tue_start" class="time" name="tue_hours_start" placeholder="start time">
    </div>
    <div class="input-sb-fld">
    <input type="text" id="tue_close" class="time" name="tue_hours_close" placeholder="close time">
    </div>
  </div>
  <div class="field">
    <label>Working Hours Wed</label><br>
    <div class="input-sb-fld">
    <input type="text" id="wed_start" class="time" name="wed_hours_start" placeholder="start time">
    </div>
    <div class="input-sb-fld">
    <input type="text" id="wed_close" class="time" name="wed_hours_close" placeholder="close time">
    </div>
  </div>
  <div class="field">
    <label>Working Hours Thu</label><br>
    <div class="input-sb-fld">
    <input type="text" id="thu_start" class="time" name="thu_hours_start" placeholder="start time">
    </div>
    <div class="input-sb-fld">
    <input type="text" id="thu_close" class="time" name="thu_hours_close" placeholder="close time">
    </div>
  </div>
  <div class="field">
    <label>Working Hours Fri</label><br>
    <div class="input-sb-fld">
    <input type="text" id="fri_start" class="time" name="fri_hours_start" placeholder="start time">
    </div>
    <div class="input-sb-fld">
    <input type="text" id="fri_close" class="time" name="fri_hours_close" placeholder="close time">
    </div>
  </div>
  <%= f.hidden_field :WorkingHours %>
<!--   <input type="hidden" value="" name="admin_service_center[WorkingHours]" id="timings_hidden"> -->
  <!-- <div class="field">
    <label>Working Hours Sat</label><br>
		<div class="srvc-sntr-ch">
		  <input type="radio" class="satday" name="sat_holiday" value="1">Yes
		  </div>
		  <div class="srvc-sntr-ch">
		  <input type="radio" class="satday" name="sat_holiday" value="0">NO
	  </div>
    <label>Saterday Holiday</label><br>
      <input type="radio" class="satday" name="sat_holiday" value="1">Yes
      <input type="radio" class="satday" name="sat_holiday" value="0">NO
        <div class="sat_working" style="display:none">
          <div class="field">
          <label>Working Hours Sat</label><br>
            <input type="text" id="sat_start" class="time" name="sat_hours_start" placeholder="start time">
            <input type="text" id="sat_close" class="time" name="sat_hours_close" placeholder="close time">
          </div>
        </div> -->

  </div>
  <!-- <div class="field">
    <label>Working Hours Sun</label><br>
	<div class="srvc-sntr-ch">
      <input type="radio" class="sunday" name="sun_holiday" value="1">Yes
	  </div>
	  <div class="srvc-sntr-ch">
      <input type="radio" class="sunday" name="sun_holiday" value="0">NO
	  </div>
        <div class="sunday_working" style="display:none">
          <div class="field">
            <input type="text" class="time" name="sun_hours_start" placeholder="start time">
            <input type="text" class="time" name="sun_hours_close" placeholder="close time">
          </div>
        </div> -->
  <div class="actions">
    <a href="javascript:void(0)" onclick="addTimings()">Add Timings</a>
  </div>
   
  
  
  <div class="actions">

    <%= f.submit :class => "edit-btn-comp", :id => "submit"%>
	<%= link_to 'Back', admin_service_centers_path, :class => "back-btn-comp" %>
  </div>
        
  </div>
</div>


<% end %>

</div>
</div>
</div>
